Pently ASM6
===========

This is a port of the Pently audio driver to ASM6.  Because it is
produced automatically, it should be as up-to-date as the ca65
version unless the build process has rotted.

`ca65toasm6.py` is an automated translator from ca65 to ASM6.
Building an ASM6-compatible translation of Pently takes three steps.
The first two must be performed when `pentlyconfig.inc` changes.
The last must be performed when the score changes.

    REM Make a RAM map based on pentlyconfig.inc
    py ../tools/pentlybss.py --asm6 pentlyconfig.inc pentlymusicbase -o pentlybss.inc
    
    REM Translate Pently to ASM6
    py ca65toasm6.py pentlyconfig.inc ../src/pently.inc ../src/pentlyseq.inc ../src/pentlysound.s ../src/pentlymusic.s > pently.asm
    
    REM Translate score to ASM6
    py ../tools/pentlyas.py --asm6 --periods 76 ../audio/musicseq.pently -o musicseq.asm

The application that uses Pently must include four files:

- `pentlyzp.inc` (static) within a zero page `enum`
- `pentlybss.inc` (generated by `pentlybss.py`) within a RAM `enum`
- `pently.asm` (generated by `ca65toasm6.py`) within ROM
- `musicseq.asm` (generated by `pentlyas.py`) within ROM

    enum $0010  ; Start of zero page variables
    include "pentlyzp.inc"
    ende
    
    enum $0300  ; Start of BSS variables
    include "pentlybss.inc"
    ende
    
    base $C000
    ; omitted: much
    include "pently.asm"
    include "musicseq.asm"

